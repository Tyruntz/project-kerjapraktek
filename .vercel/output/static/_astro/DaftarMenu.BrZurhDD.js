import{j as e}from"./jsx-runtime.D5qyYPMi.js";import{r as i}from"./index.CZlPm10g.js";import{u as y,c as w,a as p}from"./cartStore.D-GKsDpz.js";import{M as C}from"./Modal.7jivWZB9.js";import{e as k,f as S,g as M}from"./index.CM7VT_y1.js";const P=({title:a,children:l})=>e.jsxs("div",{className:" border rounded-md h-auto p-3 m-3",children:[e.jsx("h1",{className:"text-center font-bold",children:a}),e.jsx("div",{className:"grid content-center h-[250px] grid-flow-col gap-1 overflow-x-auto scroll-smooth scrollbar-hide",children:l})]}),N=a=>{const[l,r]=i.useState(!1),x=()=>r(!0),c=y(w),[s,o]=i.useState(null),[m,d]=i.useState(null);i.useEffect(()=>{s==="Panas"?d(a.hargapanas):s==="Dingin"&&d(a.hargadingin)},[s]);const u=()=>{if(s){const h=c.find(g=>g.id===a.id&&g.variant===s);h?h.quantity+=1:(p({id:a.id+s,itemId:a.id,name:a.nama+" "+s,price:m,variant:s,imgurl:a.imgurl,quantity:1}),r(!1))}else alert("Please select a variant")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"h-auto w-[150px] p-2 shadow-md",children:[e.jsx("img",{className:"h-[120px] rounded-t-lg hover:opacity-50 object-cover w-full transition ease-in-out duration-150",src:a.imgurl,alt:a.nama}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-center text-lg",children:a.nama}),e.jsxs("table",{className:"text-center w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-center text-gray-400",children:[e.jsx("th",{children:"Hot"}),e.jsx("th",{children:"Cold"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"text-center text-sm",children:[e.jsx("td",{children:a.hargapanas?a.hargapanas/1e3+"K":"-"}),e.jsx("td",{children:a.hargadingin?a.hargadingin/1e3+"K":"-"})]})})]}),e.jsxs(C,{onClose:()=>r(!1),isOpen:l,children:[e.jsx("h2",{className:"text-xl mb-4",children:s?a.nama+" "+s:a.nama}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{children:e.jsx("img",{src:a.imgurl,className:"h-[200px] w-[200px] object-cover rounded-md",alt:""})}),e.jsxs("div",{className:"flex flex-col p-5 justify-between items-center",children:[e.jsx("h3",{children:"Pilih Varian"}),e.jsxs("div",{className:"flex gap-2 m-2",children:[e.jsxs("button",{className:`${s==="Panas"?"bg-[#860101] text-white":"bg-gray-300 text-black"} ${a.hargapanas?"opacity-100":"opacity-25"} p-4 flex flex-col justify-center items-center rounded-md mr-2`,onClick:()=>o("Panas"),disabled:a.hargapanas===null,children:[e.jsx(k,{className:"h-6 w-6"}),"Panas"]}),e.jsxs("button",{className:`${s==="Dingin"?"bg-[#860101] text-white":"bg-gray-300 text-black"} ${a.hargadingin?"opacity-100":"opacity-25"} p-4 flex flex-col justify-center items-center  rounded-md`,onClick:()=>o("Dingin"),disabled:a.hargadingin===null,children:[e.jsx(S,{className:"h-6 w-6"}),"Dingin"]})]}),e.jsxs("p",{children:["Harga :",s=="Panas"?" Rp. "+a.hargapanas:s=="Dingin"?" Rp. "+a.hargadingin:""]}),e.jsx("button",{onClick:u,className:"bg-[#ffb300] hover:scale-110 transition-all ease-in-out  px-4 py-2 rounded-md mt-2",children:"Add to Cart"})]})]})]})]}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("button",{className:"bg-[#A3080C] py-1 text-sm flex justify-center items-center w-full rounded-md",onClick:x,children:e.jsx(M,{className:"h-4 w-4 text-white"})})})]},a.id)})},F=()=>{const[a,l]=i.useState([]),[r,x]=i.useState(""),[c,s]=i.useState([]),[o,m]=i.useState(!0),[d,u]=i.useState(null),[h,g]=i.useState([]);if(i.useEffect(()=>{(async()=>{try{const[n,b]=await Promise.all([fetch("api/getMenus.json"),fetch("api/getKategori.json")]),j=await n.json(),v=await b.json();l(j.data),s(j.data),g(v.data),m(!1)}catch(n){u(n),m(!1)}})()},[]),i.useEffect(()=>{s(a.filter(t=>t.nama.toLowerCase().includes(r.toLowerCase())))},[r,a]),o)return e.jsx("div",{className:"min-h-screen grid place-content-center",children:"Loading..."});if(d)return e.jsxs("div",{children:["Error: ",d.message]});const f=h.map(t=>({...t,items:c.filter(n=>n.kategori_id===t.id)}));return e.jsxs("div",{className:"mt-[3.5rem]",children:[e.jsx("div",{className:"border-b flex p-1 justify-end gap-3",children:e.jsx("input",{className:"rounded-md w-full",type:"search",placeholder:"Cari Menu",value:r,onChange:t=>x(t.target.value)})}),e.jsx("div",{className:"",children:r?c.length>0?c.map(t=>e.jsx(N,{id:t.id,nama:t.nama,hargapanas:t.harga_panas,hargadingin:t.harga_dingin,imgurl:t.imageurl},t.id)):e.jsx("p",{className:"",children:"Opss, Sepertinya menu yang kamu cari tidak ada🙁"}):f.length>0?f.map(t=>e.jsx(P,{title:t.nama_kategori,children:t.items.length>0?t.items.map(n=>e.jsx(N,{id:n.id,nama:n.nama,hargapanas:n.harga_panas,hargadingin:n.harga_dingin,imgurl:n.imageurl},n.id)):e.jsx("p",{children:"Menu tidak ditemukan di kategori ini"})},t.id)):e.jsx("p",{children:"Menu tidak ditemukan"})})]})};export{F as default};
